Index: app/src/main/java/com/example/animbro/anime/screens/HomePage.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.animbro.anime.screens\n\nimport androidx.compose.material.icons.Icons\nimport androidx.compose.material.icons.filled.Warning\nimport androidx.compose.material3.*\nimport androidx.compose.ui.platform.LocalContext\nimport com.example.animbro.anime.components.AnimeCard\n\nimport android.content.Intent\nimport androidx.compose.foundation.BorderStroke\nimport androidx.compose.foundation.clickable\nimport androidx.compose.foundation.layout.*\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.lazy.LazyRow\n\nimport androidx.compose.runtime.Composable\nimport androidx.compose.runtime.collectAsState\nimport androidx.compose.runtime.getValue\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.Dp\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.layout.ContentScale\nimport androidx.compose.ui.res.painterResource\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.shape.RoundedCornerShape\nimport androidx.compose.ui.graphics.Brush\nimport androidx.compose.ui.res.colorResource\nimport androidx.compose.ui.text.font.FontWeight\nimport androidx.compose.ui.text.style.TextDecoration\nimport androidx.compose.ui.text.style.TextOverflow\nimport androidx.compose.ui.unit.sp\nimport coil.compose.AsyncImage\nimport com.example.animbro.domain.models.Anime\nimport com.example.animbro.R\nimport androidx.compose.ui.tooling.preview.Preview\nimport com.example.animbro.data.remote.dto.MainPictureDTO\nimport android.os.Bundle\nimport androidx.activity.ComponentActivity\nimport androidx.activity.compose.setContent\nimport androidx.activity.enableEdgeToEdge\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.material3.Scaffold\nimport com.example.animbro.ui.theme.AnimBroTheme\nimport com.example.animbro.anime.services.HomeViewModel\nimport com.example.animbro.anime.components.Banner\n\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.material.icons.filled.Search\nimport com.example.animbro.navigation.BottomNavigationBar\nimport androidx.activity.viewModels\nimport androidx.compose.foundation.Image\nimport androidx.compose.runtime.LaunchedEffect\nimport androidx.compose.ui.Alignment\nimport com.example.animbro.anime.components.StatusUpdateDialog\nimport dagger.hilt.android.AndroidEntryPoint\n\n\nimport androidx.navigation.compose.rememberNavController\n\n@AndroidEntryPoint\nclass HomeActivity : ComponentActivity() {\n    private val viewModel: HomeViewModel by viewModels()\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        enableEdgeToEdge()\n\n        setContent {\n            AnimBroTheme {\n                val navController = rememberNavController()\n                val uiState by viewModel.uiState.collectAsState()\n                val context = LocalContext.current\n\n\n\n                Scaffold(\n                    bottomBar = {\n                        BottomNavigationBar(\n                            navController = navController,\n                            currentRoute = \"home\"\n                        )\n                    }\n                ) { paddingValues ->\n                    Box(modifier = Modifier.padding(paddingValues)) {\n                        HomeScreen(\n                            viewModel = viewModel,\n                            onAnimeClick = { animeId ->\n                                navigateToDetail(animeId)\n                            },\n                            onSearchClick = {\n                                val intent = Intent(context, SearchActivity::class.java)\n                                context.startActivity(intent)\n                            },\n                            onMoreClick = { section ->\n                                // TODO: Navigate to section list screen\n                            }\n                        )\n                    }\n                }\n            }\n        }\n    }\n\n    private fun navigateToDetail(animeId: Int) {\n        val intent = Intent(this, DetailActivity::class.java).apply {\n            putExtra(\"animeId\", animeId)\n        }\n    }\n}\n\n@Composable\nfun HeaderSection(\n    onSearchClick: () -> Unit\n) {\n    Row(\n        modifier = Modifier\n            .fillMaxWidth()\n            .padding(horizontal = 20.dp, vertical = 10.dp),\n        horizontalArrangement = Arrangement.SpaceBetween,\n        verticalAlignment = Alignment.CenterVertically\n    ) {\n        // Search Bar (Clickable Box)\n        Box(\n            modifier = Modifier\n                .weight(1f)\n                .height(50.dp)\n                .clip(RoundedCornerShape(12.dp))\n                .background(MaterialTheme.colorScheme.surfaceVariant)\n                .clickable { onSearchClick() }\n                .padding(horizontal = 16.dp),\n            contentAlignment = Alignment.CenterStart\n        ) {\n            Row(verticalAlignment = Alignment.CenterVertically) {\n                Icon(\n                    imageVector = Icons.Default.Search,\n                    contentDescription = \"Search\",\n                    tint = MaterialTheme.colorScheme.onSurfaceVariant\n                )\n                Spacer(modifier = Modifier.width(8.dp))\n                Text(\n                    text = \"Search anime...\",\n                    color = MaterialTheme.colorScheme.onSurfaceVariant\n                )\n            }\n        }\n\n    }\n}\n\n@Composable\nfun HomeScreen(\n    viewModel: HomeViewModel,\n    screenPadding: Dp = 20.dp,\n    onAnimeClick: (Int) -> Unit = {},\n    onMoreClick: (String) -> Unit = {},\n    onSearchClick: () -> Unit = {}\n) {\n    val uiState by viewModel.uiState.collectAsState()\n    val context = LocalContext.current\n\n    LaunchedEffect(uiState.randomAnimeId) {\n        uiState.randomAnimeId?.let { id ->\n            onAnimeClick(id)\n            viewModel.onRandomAnimeNavigated()\n        }\n    }\n\n    if (uiState.isDialogVisible && uiState.selectedAnime != null) {\n        StatusUpdateDialog(\n            currentStatus = uiState.currentAnimeStatus,\n            onDismissRequest = { viewModel.dismissDialog() },\n            onStatusSelected = { category ->\n                viewModel.updateAnimeStatus(category)\n            },\n            onRemoveClick = {\n                viewModel.removeAnimeFromList()\n            }\n        )\n    }\n\n    Box(modifier = Modifier.fillMaxSize()) {\n        when {\n            uiState.isLoading -> {\n                Box(\n                    modifier = Modifier.fillMaxSize(),\n                    contentAlignment = Alignment.Center\n                ) {\n                    CircularProgressIndicator(color = MaterialTheme.colorScheme.primary)\n                }\n            }\n            uiState.error != null -> {\n                Box(\n                    modifier = Modifier.fillMaxSize(),\n                    contentAlignment = Alignment.Center\n                ) {\n                    Column(\n                        horizontalAlignment = Alignment.CenterHorizontally,\n                        verticalArrangement = Arrangement.spacedBy(16.dp)\n                    ) {\n                        Icon(\n                            imageVector = Icons.Default.Warning,\n                            contentDescription = \"Error\",\n                            tint = MaterialTheme.colorScheme.error,\n                            modifier = Modifier.size(64.dp)\n                        )\n                        Text(\n                            text = \"No Internet Connection\",\n                            style = MaterialTheme.typography.titleMedium,\n                            color = MaterialTheme.colorScheme.onBackground\n                        )\n                        Button(\n                            onClick = { viewModel.onRefresh() },\n                            colors = ButtonDefaults.buttonColors(\n                                containerColor = MaterialTheme.colorScheme.primary\n                            )\n                        ) {\n                            Text(\"Retry\", color = MaterialTheme.colorScheme.onPrimary)\n                        }\n                    }\n                }\n            }\n            else -> {\n                LazyColumn(\n                    modifier = Modifier\n                        .fillMaxSize()\n                        .background(MaterialTheme.colorScheme.background)\n                ) {\n                    // Header Section\n                    item {\n                        HeaderSection(\n                            onSearchClick = onSearchClick\n                        )\n                    }\n                    item {\n                        HomeScreenContent(\n                            viewModel = viewModel,\n                            screenPadding = screenPadding,\n                            onAnimeClick = onAnimeClick,\n\n                        )\n                    }\n                }\n            }\n        }\n\n        // Floating Action Button for Random Anime\n        if (!uiState.isLoading && uiState.error == null) {\n            FloatingActionButton(\n                onClick = {\n                    if (!uiState.isRandomLoading) {\n                        viewModel.findRandomAnime()\n                    }\n                },\n                modifier = Modifier\n                    .align(Alignment.BottomEnd)\n                    .padding(16.dp),\n                containerColor = MaterialTheme.colorScheme.primaryContainer,\n                contentColor = MaterialTheme.colorScheme.onPrimaryContainer\n            ) {\n                if (uiState.isRandomLoading) {\n                    CircularProgressIndicator(\n                        modifier = Modifier.size(24.dp),\n                        color = MaterialTheme.colorScheme.onPrimaryContainer\n                    )\n                } else {\n                    Icon(\n                        painter = painterResource(R.drawable.ic_dice),\n                        contentDescription = \"Random Anime\"\n                    )\n                }\n            }\n        }\n    }\n}\n\n@Composable\nfun HomeScreenContent(\n    viewModel: HomeViewModel,\n    screenPadding: Dp = 20.dp,\n    onAnimeClick: (Int) -> Unit = {},\n) {\n    val uiState by viewModel.uiState.collectAsState()\n\n    Column(\n        modifier = Modifier.fillMaxWidth(),\n        verticalArrangement = Arrangement.spacedBy(20.dp)\n    ) {\n        if (uiState.trendingAnime.isNotEmpty()) {\n            val featuredAnime = uiState.trendingAnime.first()\n            PosterSection(\n                anime = featuredAnime,\n                onDetailsClick = { onAnimeClick(featuredAnime.id) },\n                onTrailerClick = { /* Handle trailer */ }\n            )\n        }\n\n        // Trending Section\n        AnimeSection(\n            title = \"Trending\",\n            animeList = uiState.trendingAnime,\n            screenPadding = screenPadding,\n            onAnimeClick = onAnimeClick,\n            onAddClick = { anime -> viewModel.onAddClick(anime) }\n        )\n\n        // Top Ranked Section\n        AnimeSection(\n            title = \"Top Ranked\",\n            animeList = uiState.topRankedAnime,\n            screenPadding = screenPadding,\n            onAnimeClick = onAnimeClick,\n            onAddClick = { anime -> viewModel.onAddClick(anime) }\n        )\n\n        // Upcoming Section\n        AnimeSection(\n            title = \"Upcoming\",\n            animeList = uiState.upcomingAnime,\n            screenPadding = screenPadding,\n            onAnimeClick = onAnimeClick,\n            onAddClick = { anime -> viewModel.onAddClick(anime) }\n        )\n\n        // Favourite Anime Section\n        AnimeSection(\n            title = \"Most Favourite\",\n            animeList = uiState.favouriteAnime,\n            screenPadding = screenPadding,\n            onAnimeClick = onAnimeClick,\n            onAddClick = { anime -> viewModel.onAddClick(anime) }\n        )\n    }\n}\n\n\n@Composable\nfun AnimeSection(\n    title: String,\n    animeList: List<Anime>,\n    screenPadding: Dp,\n    onAnimeClick: (Int) -> Unit,\n    onAddClick: (Anime) -> Unit\n) {\n    Column(\n        modifier = Modifier\n            .fillMaxWidth()\n            .padding(horizontal = screenPadding)\n    ) {\n        AnimeSectionRow(\n            title = title,\n        )\n\n        if (animeList.isEmpty()) {\n            Text(\n                text = \"No anime available\",\n                modifier = Modifier.padding(vertical = 8.dp),\n                style = MaterialTheme.typography.bodyMedium,\n                color = MaterialTheme.colorScheme.onSurfaceVariant\n            )\n        } else {\n            LazyRow(\n                horizontalArrangement = Arrangement.spacedBy(14.dp),\n                contentPadding = PaddingValues(vertical = 8.dp)\n            ) {\n                items(animeList.size) { index ->\n                    val anime = animeList[index]\n                    AnimeCard(\n                        anime = anime,\n                        onClick = { onAnimeClick(anime.id) },\n                        onAddClick = onAddClick\n                    )\n                }\n            }\n        }\n    }\n}\n\n@Composable\nfun PosterSection(\n    anime: Anime,\n    onDetailsClick: () -> Unit,\n    onTrailerClick: () -> Unit\n) {\n    Box(\n        modifier = Modifier\n            .fillMaxWidth()\n            .height(360.dp)\n    ) {\n\n        AsyncImage(\n            model = anime.image?.large ?: anime.image?.medium,\n            contentDescription = anime.title,\n            contentScale = ContentScale.Crop,\n            modifier = Modifier.fillMaxSize(),\n            placeholder = painterResource(R.drawable.poster_sample),\n            error = painterResource(R.drawable.poster_sample)\n        )\n\n        // Gradient overlay\n        Box(\n            Modifier\n                .fillMaxSize()\n                .background(\n                    Brush.verticalGradient(\n                        colors = listOf(\n                            Color.Transparent,\n                            MaterialTheme.colorScheme.surface.copy(alpha = 0.0f),\n                            MaterialTheme.colorScheme.surface.copy(alpha = 0.6f),\n                            MaterialTheme.colorScheme.surface.copy(alpha = 1.0f)\n                        )\n                    )\n                )\n        )\n//        Banner(\n//            height = 24.dp,\n//            modifier = Modifier\n//                .fillMaxWidth()\n//                .padding(top = 20.dp)\n//                .align(Alignment.TopCenter)\n//        )\n        Image(\n            painter = painterResource(id = R.drawable.animebro_logo),\n            contentDescription = \"App Logo\",\n            modifier = Modifier\n                .height(40.dp)\n                .align(Alignment.TopStart)\n        )\n        // Content\n        Box(\n            modifier = Modifier\n                .fillMaxSize()\n                .padding(top = 72.dp)\n        ) {\n            Column(\n                modifier = Modifier\n                    .align(Alignment.TopStart)\n                    .padding(horizontal = 16.dp)\n                    .fillMaxHeight()\n            ) {\n                Text(\n                    anime.title,\n                    style = MaterialTheme.typography.headlineMedium,\n                    color = Color.White,\n                    fontWeight = FontWeight.Bold,\n                    maxLines = 2,\n                    overflow = TextOverflow.Ellipsis\n                )\n\n                Text(\n                    text = buildString {\n                        if (anime.status.isNotEmpty()) append(anime.status)\n                        if (anime.episodes > 0) {\n                            if (isNotEmpty()) append(\" • \")\n                            append(\"${anime.episodes} eps\")\n                        }\n                    },\n                    color = Color.White,\n                    fontWeight = FontWeight.SemiBold\n                )\n\n                Text(\n                    text = buildString {\n                        if (anime.score > 0) append(\"★ ${anime.score}\")\n                        if (anime.startDate?.isNotEmpty() == true) {\n                            if (isNotEmpty()) append(\" • \")\n                            append(anime.startDate)\n                        }\n                    },\n                    color = Color.White,\n                    fontWeight = FontWeight.SemiBold\n                )\n\n                Spacer(Modifier.height(6.dp))\n\n                // Description\n                Text(\n                    anime.description ?: \"No description available\",\n                    color = Color.White,\n                    fontWeight = FontWeight.Medium,\n                    maxLines = 3,\n                    fontSize = 14.sp,\n                    overflow = TextOverflow.Ellipsis,\n                    modifier = Modifier.weight(1f)\n                )\n            }\n\n            // Buttons\n            Row(\n                horizontalArrangement = Arrangement.spacedBy(8.dp),\n                modifier = Modifier\n                    .align(Alignment.BottomEnd)\n                    .padding(16.dp)\n            ) {\n                OutlinedButton(\n                    onClick = onDetailsClick,\n                    border = BorderStroke(1.dp, MaterialTheme.colorScheme.primary)\n                ) {\n                    Text(\"Details\", color = MaterialTheme.colorScheme.primary)\n                }\n\n            }\n        }\n    }\n}\n\n@Composable\nfun AnimeSectionRow(title: String) {\n    Row(\n        modifier = Modifier.fillMaxWidth(),\n        horizontalArrangement = Arrangement.SpaceBetween,\n        verticalAlignment = Alignment.CenterVertically\n    ) {\n        Text(\n            title,\n            style = MaterialTheme.typography.titleLarge,\n            fontWeight = FontWeight.Bold,\n            color = MaterialTheme.colorScheme.primary\n        )\n\n    }\n}\n\n\n\n// Preview Functions\n//@Preview(showBackground = true, showSystemUi = true)\n//@Composable\n//fun HomeScreenPreview() {\n//    MaterialTheme {\n//        HomeScreen(\n//            viewModel = PreviewHomeViewModel(),\n//            onAnimeClick = {},\n//            onMoreClick = {}\n//        )\n//    }\n//}\n\n@Preview(showBackground = true)\n@Composable\nfun AnimeSectionPreview() {\n    MaterialTheme {\n        AnimeSection(\n            title = \"Trending\",\n            animeList = getSampleAnimeList(),\n            screenPadding = 20.dp,\n            onAnimeClick = {},\n            onAddClick = {}\n        )\n    }\n}\n\n@Preview(showBackground = true)\n@Composable\nfun AnimeCardPreview() {\n    MaterialTheme {\n        AnimeCard(\n            anime = getSampleAnime(),\n            onClick = {},\n            onAddClick = {}\n        )\n    }\n}\n\n@Preview(showBackground = true, widthDp = 400)\n@Composable\nfun PosterSectionPreview() {\n    MaterialTheme {\n        PosterSection(\n            anime = getSampleAnime(),\n            onDetailsClick = {},\n            onTrailerClick = {}\n        )\n    }\n}\n\n\n// Preview Helper Functions\nprivate fun getSampleAnime() = Anime(\n    id = 1,\n    title = \"Attack on Titan\",\n    image = MainPictureDTO(\n        medium = \"https://cdn.myanimelist.net/images/anime/10/47347.jpg\",\n        large = \"https://cdn.myanimelist.net/images/anime/10/47347l.jpg\"\n    ),\n    rank = 1,\n    status = \"Finished Airing\",\n    episodes = 25,\n    rating = \"R - 17+\",\n    score = 8.5.toFloat(),\n    popularity = 1,\n    duration = 24,\n    startDate = \"2013-04-07\",\n    endDate = \"2013-09-29\",\n    description = \"Centuries ago, mankind was slaughtered to near extinction by monstrous humanoid creatures called titans, forcing humans to hide in fear behind enormous concentric walls.\",\n    isFavourite = false\n)\n\nprivate fun getSampleAnimeList() = listOf(\n    getSampleAnime().copy(id = 1, title = \"Attack on Titan\", rank = 1),\n    getSampleAnime().copy(id = 2, title = \"Fullmetal Alchemist\", rank = 2),\n    getSampleAnime().copy(id = 3, title = \"Death Note\", rank = 3),\n    getSampleAnime().copy(id = 4, title = \"One Punch Man\", rank = 4),\n    getSampleAnime().copy(id = 5, title = \"Steins;Gate\", rank = 5)\n)\n\n// Preview ViewModel - Creates a mock ViewModel with sample data\n//private fun PreviewHomeViewModel(): HomeViewModel {\n//    val mockRepository = object : com.example.animbro.domain.repository.AnimeRepository {\n//        override suspend fun getTopRatedAnime(limit: Int) = getSampleAnimeList()\n//        override suspend fun getPopularAnime(limit: Int) = getSampleAnimeList()\n//        override suspend fun getUpcomingAnime(limit: Int) = getSampleAnimeList()\n//        override suspend fun getFavouritesAnime(limit: Int) = getSampleAnimeList()\n//        override suspend fun searchAnime(query: String) = getSampleAnimeList()\n//        override suspend fun getAnimeDetails(id: Int) = getSampleAnime()\n//        override fun getWatchListByCategory(category: String) =\n//            MutableStateFlow(getSampleAnimeList())\n//\n//        override suspend fun addToWatchList(anime: Anime, category: String) {}\n//        override suspend fun removeFromWatchList(id: Int) {}\n//    }\n//\n//    return HomeViewModel(mockRepository)\n//}\n\n\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/animbro/anime/screens/HomePage.kt b/app/src/main/java/com/example/animbro/anime/screens/HomePage.kt
--- a/app/src/main/java/com/example/animbro/anime/screens/HomePage.kt	(revision 908c59cb250d3a7ae15bf5cfef17101078f8382f)
+++ b/app/src/main/java/com/example/animbro/anime/screens/HomePage.kt	(date 1764546321504)
@@ -95,6 +95,9 @@
                             },
                             onMoreClick = { section ->
                                 // TODO: Navigate to section list screen
+                            },
+                            onError = {
+                                // For HomeActivity usage, maybe show toast or do nothing if not main flow
                             }
                         )
                     }
@@ -155,7 +158,8 @@
     screenPadding: Dp = 20.dp,
     onAnimeClick: (Int) -> Unit = {},
     onMoreClick: (String) -> Unit = {},
-    onSearchClick: () -> Unit = {}
+    onSearchClick: () -> Unit = {},
+    onError: () -> Unit = {}
 ) {
     val uiState by viewModel.uiState.collectAsState()
     val context = LocalContext.current
@@ -167,6 +171,12 @@
         }
     }
 
+    LaunchedEffect(uiState.error) {
+        if (uiState.error != null) {
+            onError()
+        }
+    }
+
     if (uiState.isDialogVisible && uiState.selectedAnime != null) {
         StatusUpdateDialog(
             currentStatus = uiState.currentAnimeStatus,
@@ -191,35 +201,7 @@
                 }
             }
             uiState.error != null -> {
-                Box(
-                    modifier = Modifier.fillMaxSize(),
-                    contentAlignment = Alignment.Center
-                ) {
-                    Column(
-                        horizontalAlignment = Alignment.CenterHorizontally,
-                        verticalArrangement = Arrangement.spacedBy(16.dp)
-                    ) {
-                        Icon(
-                            imageVector = Icons.Default.Warning,
-                            contentDescription = "Error",
-                            tint = MaterialTheme.colorScheme.error,
-                            modifier = Modifier.size(64.dp)
-                        )
-                        Text(
-                            text = "No Internet Connection",
-                            style = MaterialTheme.typography.titleMedium,
-                            color = MaterialTheme.colorScheme.onBackground
-                        )
-                        Button(
-                            onClick = { viewModel.onRefresh() },
-                            colors = ButtonDefaults.buttonColors(
-                                containerColor = MaterialTheme.colorScheme.primary
-                            )
-                        ) {
-                            Text("Retry", color = MaterialTheme.colorScheme.onPrimary)
-                        }
-                    }
-                }
+                // Error handled by LaunchedEffect -> Navigation
             }
             else -> {
                 LazyColumn(
Index: app/src/main/java/com/example/animbro/navigation/Screen.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.animbro.navigation\n\nsealed class Screen(val route: String) {\n    // Auth Screens\n    object Login : Screen(\"login\")\n    object SignUp : Screen(\"signup\")\n    object ForgotPassword : Screen(\"forgot_password\")\n\n    // Main App Screens\n    object Home : Screen(\"home\")\n    object Search : Screen(\"search\")\n    object AnimeList : Screen(\"anime_list\")\n    object Profile : Screen(\"profile\")\n\n    // Detail Screen with parameter\n    object AnimeDetails : Screen(\"anime_details/{animeId}\") {\n        fun createRoute(animeId: Int) = \"anime_details/$animeId\"\n    }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/animbro/navigation/Screen.kt b/app/src/main/java/com/example/animbro/navigation/Screen.kt
--- a/app/src/main/java/com/example/animbro/navigation/Screen.kt	(revision 908c59cb250d3a7ae15bf5cfef17101078f8382f)
+++ b/app/src/main/java/com/example/animbro/navigation/Screen.kt	(date 1764546192831)
@@ -11,6 +11,7 @@
     object Search : Screen("search")
     object AnimeList : Screen("anime_list")
     object Profile : Screen("profile")
+    object Error : Screen("error")
 
     // Detail Screen with parameter
     object AnimeDetails : Screen("anime_details/{animeId}") {
Index: app/src/main/java/com/example/animbro/navigation/AppNavigation.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.animbro.navigation\n\nimport androidx.compose.foundation.layout.Box\nimport androidx.compose.foundation.layout.fillMaxSize\nimport androidx.compose.foundation.layout.padding\nimport androidx.compose.material3.Scaffold\nimport androidx.compose.runtime.Composable\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.unit.dp\nimport androidx.hilt.navigation.compose.hiltViewModel\nimport androidx.navigation.NavType\nimport androidx.navigation.compose.NavHost\nimport androidx.navigation.compose.composable\nimport androidx.navigation.compose.rememberNavController\nimport androidx.navigation.navArgument\nimport com.example.animbro.anime.screens.DetailScreen\nimport com.example.animbro.anime.screens.HomeScreen\nimport com.example.animbro.anime.screens.SearchScreen\nimport com.example.animbro.anime.screens.UserListScreen\nimport com.example.animbro.anime.screens.ProfileScreen\nimport com.example.animbro.anime.services.AnimeListViewModel\nimport com.example.animbro.anime.services.DetailViewModel\nimport com.example.animbro.anime.services.HomeViewModel\nimport com.example.animbro.anime.services.SearchViewModel\nimport com.example.animbro.auth.screens.ForgotPasswordScreen\nimport com.example.animbro.auth.screens.LoginScreen\nimport com.example.animbro.auth.screens.SignUpScreen\nimport com.google.firebase.auth.FirebaseAuth\n\nimport androidx.compose.animation.core.tween\nimport androidx.compose.animation.fadeIn\nimport androidx.compose.animation.fadeOut\n\n@Composable\nfun AppNavigation() {\n    val navController = rememberNavController()\n\n    // Check if user is logged in\n    val currentUser = FirebaseAuth.getInstance().currentUser\n    val startDestination = if (currentUser != null) {\n        Screen.Home.route\n    } else {\n        Screen.Login.route\n    }\n\n    NavHost(\n        navController = navController,\n        startDestination = startDestination,\n        enterTransition = { fadeIn(animationSpec = tween(500)) },\n        exitTransition = { fadeOut(animationSpec = tween(500)) },\n        popEnterTransition = { fadeIn(animationSpec = tween(500)) },\n        popExitTransition = { fadeOut(animationSpec = tween(500)) }\n    ) {\n        // Auth Screens\n        composable(Screen.Login.route) {\n            LoginScreen(\n                onNavigateToSignUp = {\n                    navController.navigate(Screen.SignUp.route)\n                },\n                onNavigateToForgotPassword = {\n                    navController.navigate(Screen.ForgotPassword.route)\n                },\n                onLoginSuccess = {\n                    navController.navigate(Screen.Home.route) {\n                        popUpTo(Screen.Login.route) { inclusive = true }\n                    }\n                }\n            )\n        }\n\n        composable(Screen.SignUp.route) {\n            SignUpScreen(\n                onNavigateToLogin = {\n                    navController.popBackStack()\n                },\n                onSignUpSuccess = {\n                    navController.navigate(Screen.Home.route) {\n                        popUpTo(Screen.SignUp.route) { inclusive = true }\n                    }\n                }\n            )\n        }\n\n        composable(Screen.ForgotPassword.route) {\n            ForgotPasswordScreen(\n                onNavigateBack = {\n                    navController.popBackStack()\n                }\n            )\n        }\n\n        // Main App Screens with Bottom Navigation\n        composable(Screen.Home.route) {\n            val viewModel: HomeViewModel = hiltViewModel()\n\n            Scaffold(\n                bottomBar = {\n                    BottomNavigationBar(\n                        navController = navController,\n                        currentRoute = Screen.Home.route\n                    )\n                }\n            ) { paddingValues ->\n                Box(modifier = Modifier.padding(paddingValues)) {\n                    HomeScreen(\n                        viewModel = viewModel,\n                        screenPadding = 20.dp,\n                        onAnimeClick = { animeId ->\n                            navController.navigate(Screen.AnimeDetails.createRoute(animeId))\n                        },\n                        onMoreClick = { section ->\n                            // TODO: Navigate to section list screen\n                        },\n                        onSearchClick = {\n                            navController.navigate(Screen.Search.route)\n                        }\n                    )\n                }\n            }\n        }\n\n        composable(Screen.Search.route) {\n            val viewModel: SearchViewModel = hiltViewModel()\n\n            Scaffold(\n                bottomBar = {\n                    BottomNavigationBar(\n                        navController = navController,\n                        currentRoute = Screen.Search.route\n                    )\n                }\n            ) { paddingValues ->\n                SearchScreen(\n                    viewModel = viewModel,\n                    modifier = Modifier.padding(paddingValues),\n                    onBackClick = {\n                        navController.popBackStack()\n                    }\n                )\n            }\n        }\n\n        composable(Screen.AnimeList.route) {\n            val viewModel: AnimeListViewModel = hiltViewModel()\n\n            Scaffold(\n                bottomBar = {\n                    BottomNavigationBar(\n                        navController = navController,\n                        currentRoute = Screen.AnimeList.route\n                    )\n                }\n            ) { paddingValues ->\n                UserListScreen(\n                    viewModel = viewModel,\n                    modifier = Modifier.padding(paddingValues),\n                    onAnimeClick = { animeId ->\n                        navController.navigate(Screen.AnimeDetails.createRoute(animeId))\n                    }\n                )\n            }\n        }\n\n        composable(Screen.Profile.route) {\n            Scaffold(\n                bottomBar = {\n                    BottomNavigationBar(\n                        navController = navController,\n                        currentRoute = Screen.Profile.route\n                    )\n                }\n            ) { paddingValues ->\n                ProfileScreen(\n                    modifier = Modifier.padding(paddingValues),\n                    navController = navController\n                )\n            }\n        }\n\n        composable(\n            route = Screen.AnimeDetails.route,\n            arguments = listOf(\n                navArgument(\"animeId\") { type = NavType.IntType }\n            )\n        ) { backStackEntry ->\n            val animeId = backStackEntry.arguments?.getInt(\"animeId\") ?: -1\n            val viewModel: DetailViewModel = hiltViewModel()\n\n            Scaffold(\n                modifier = Modifier.fillMaxSize()\n            ) { paddingValues ->\n                DetailScreen(\n                    viewModel = viewModel,\n                    onAnimeClick = { newAnimeId ->\n                        navController.navigate(Screen.AnimeDetails.createRoute(newAnimeId))\n                    },\n                    onBackClick = {\n                        navController.popBackStack()\n                    }\n                )\n            }\n        }\n    }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/animbro/navigation/AppNavigation.kt b/app/src/main/java/com/example/animbro/navigation/AppNavigation.kt
--- a/app/src/main/java/com/example/animbro/navigation/AppNavigation.kt	(revision 908c59cb250d3a7ae15bf5cfef17101078f8382f)
+++ b/app/src/main/java/com/example/animbro/navigation/AppNavigation.kt	(date 1764546197741)
@@ -14,6 +14,7 @@
 import androidx.navigation.compose.rememberNavController
 import androidx.navigation.navArgument
 import com.example.animbro.anime.screens.DetailScreen
+import com.example.animbro.anime.screens.ErrorScreen
 import com.example.animbro.anime.screens.HomeScreen
 import com.example.animbro.anime.screens.SearchScreen
 import com.example.animbro.anime.screens.UserListScreen
@@ -89,6 +90,16 @@
             )
         }
 
+        composable(Screen.Error.route) {
+            ErrorScreen(
+                onRetry = {
+                    navController.navigate(Screen.Home.route) {
+                        popUpTo(Screen.Error.route) { inclusive = true }
+                    }
+                }
+            )
+        }
+
         // Main App Screens with Bottom Navigation
         composable(Screen.Home.route) {
             val viewModel: HomeViewModel = hiltViewModel()
@@ -113,6 +124,11 @@
                         },
                         onSearchClick = {
                             navController.navigate(Screen.Search.route)
+                        },
+                        onError = {
+                            navController.navigate(Screen.Error.route) {
+                                popUpTo(Screen.Home.route) { inclusive = true }
+                            }
                         }
                     )
                 }
